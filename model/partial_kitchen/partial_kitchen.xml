<!-- There is a repo with household objects in mujoco : furniture sim -->

<mujoco model="iai_door">
  <!-- inertiafromgeom="true"  -->
  <compiler angle="radian" meshdir="assets" autolimits="true"  balanceinertia="true" /> 
  <option solver="Newton" integrator="RK4" >
    <!-- <flag contact="enable" multiccd="enable"/>   -->
    <!-- energy="disable"  -->
  </option>

  <asset>
    <texture builtin="checker" height="512" name="texplane" rgb1=".2 .3 .4" rgb2=".1 .15 .2" type="2d" width="512" />
    <material name="MatPlane" reflectance="0.05" shininess="0.01" specular="0.01" texrepeat="1 1" texture="texplane" texuniform="true" />
    <material name="black" rgba="0.25 0.25 0.25 1"/>
    <mesh name="SinkArea" file="sink_area_rot.stl"/>
    <mesh name="Sink" file="Sink.obj"/>
    <mesh name="Panel_60" file="Panel_60.obj"/>
    <mesh name="Drawer_60_58" file="Drawer_60_58.obj"/>
    <mesh name="Handle60" file="handle60_rot.stl"/>
    <mesh name="Drawer_80_14" file="Drawer_80_14.obj"/>
    <mesh name="Handle80" file="Handle80.obj"/>
    <mesh name="Drawer_80_29" file="Drawer_80_29.obj"/>
    <mesh name="DishWasher" file="dishwasher.stl"/>
    <mesh name="DishWasherDoor" file="dishwasher_door.stl"/>
  </asset>
   <default>
   <!-- Test the contact class solimp - harder contact setting friction="2 0.05 0.01" -->
        <default class="contact">
          <geom contype="3" condim="4" solimp="0.95 0.95 0.01" solref="0.01 1" />   
        </default>
        <default class="viz_dishwasher" >
            <geom group="1"  contype="0" conaffinity="0"/>
        </default>
        <default class="col">
            <geom rgba=".4 .8 .5 1" group="3" contype="1" conaffinity="0"/>
        </default>
   </default>
  <worldbody>
      <light pos="0 0 1000" castshadow="false" />
      <geom name="ground_plane" type="plane" material="MatPlane" size="5 5 10" rgba="1 1 1 1"/>
  </worldbody>

  <worldbody>
    <!-- <geom name="sink_area" pos="1.565 0.3 0.41" quat="0 0 0 1" type="mesh" mesh="SinkArea" />  -->
    <geom name="sink_area_bottom" pos="1.565 0.3 0.045" quat="0 0 0 1" type="box" size="0.295 1.07 0.038"  material="black"/>
    <geom name="sink_area_top" pos="1.565 0.3 0.825" quat="0 0 0 1" type="box" size="0.295 1.07 0.02"  material="black"/>
    <geom name="sink_area_right" pos="1.565 -0.782 0.395" quat="0 0 0 1" type="box" size="0.295 0.02 0.449"  material="black"/>
    <geom name="sink_area_left" pos="1.565 1.35 0.395" quat="0 0 0 1" type="box" size="0.295 0.02 0.43"  material="black"/>

    <!-- Check urdf and make this dishwash -->
    <!-- Check what does group, contype and conaffinity does -->
  <body name="sink_area_dish_washer_main" pos="1.555 0.2 0.42" quat="0 0 0 1" childclass="viz_dishwasher">
      <geom name="dishwasher" type="mesh" mesh="DishWasher" quat="0.7071 0.7071 0 0" /> 
      <geom name="dish_top" type="box" pos="-0.005 0 .32" size=".28 .275 .030" class="col"/>
      <geom name="dish_bottom" type="box" pos="-0.005 0 -.394" size=".28 .275 .057" class="col"/>
      <geom name="dish_back" type="box" pos="-0.275 0 -0.05" size=".015 .275 .4" class="col"/>
      <geom name="dish_right" type="box" pos="-0.005 0.245 -0.05" size=".28 .031 .35" class="col"/> 
      <geom name="dish_left" type="box" pos="-0.005 -0.245 -0.05" size=".28 .031 .35" class="col"/>
  
      <body name="sink_area_dish_washer_door"  pos="0.28 0 -0.305" quat="0.7071 -0.707107 0 0">
        <inertial pos="0 0 0" mass="1" diaginertia="1 1 1"/>
        <geom class="contact" name="dishwasher_door" type="mesh" mesh="DishWasherDoor" mass="1" /> 
        <geom type="box" size="0.01 0.335 0.255" pos="0.01 -0.34 0.0" />
        <joint name="sink_area_dish_washer_door_joint" type="hinge" axis="0 0 1" range="0 1.57" limited="true" damping="0.01" frictionloss="0.01"/>
        <body name="sink_area_dish_washer_door_handle" pos="0.073 -0.58 0" quat="0.707107 -0.707107 0 0">
          <inertial pos="0 0 0" mass="0.5" diaginertia="1 1 1"/>
          <!-- <geom class="contact" type="mesh" mesh="Handle60"/> -->
          <geom type="capsule" size="0.0125 0.022" pos="-0.02 -0.25 0"  quat="0.7071 0 0.7071 0"/>
          <geom type="capsule" size="0.0125 0.022" pos="-0.02 0.25 0" quat="0.7071 0 0.7071 0"/> 
          <geom class="contact" type="box" size="0.0082 0.0076 0.25" quat="0.7071 0.7071 0 0"/>
          <!-- <geom class="contact" type="box" size="0.0082 0.0076 0.25" pos="0.073 -0.58 0" quat="0.7071 0 0.7071 0"/> -->
        </body>
          <!-- door col -->
        <geom type="box" size="0.015 0.355 0.3" pos="0.005 -0.33 0.0" class="col" />
          <!-- handle col -->
    </body> 
  </body>
  </worldbody>
</mujoco>
